<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Aprendo a Leer - Versi√≥n Tablet</title>
    <style>
        /* ============================================
           RESET TOTAL - SIN CURSIVAS - T√ÅCTIL OPTIMIZADO
           ============================================ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent !important;
            -webkit-touch-callout: none !important;
            -webkit-user-select: none !important;
            user-select: none !important;
            touch-action: manipulation !important;
            font-family: 'Arial', 'Helvetica', 'Roboto', sans-serif !important;
            font-style: normal !important;
            font-weight: normal !important;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* FORZAR ARIAL EN ABSOLUTAMENTE TODOS LOS ELEMENTOS */
        body, div, span, button, input, textarea, p, h1, h2, h3, h4, h5, h6,
        .mensaje-personaje, .juego-titulo, .texto-palabra, .silaba-boton, 
        .palabra-juego, .letra-boton, .nivel-texto, .mensaje-juego, .footer,
        .boton-grande, .boton-reinicio, .boton-acento, .miniatura-texto {
            font-family: 'Arial', 'Helvetica', 'Roboto', sans-serif !important;
            font-style: normal !important;
        }

        body {
            background: linear-gradient(145deg, #1B4F6E, #2C8F8F);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.96);
            border-radius: 40px;
            padding: 20px;
            box-shadow: 0 20px 40px rgba(0, 20, 30, 0.4);
            border: 5px solid #FFB347;
        }

        /* ============================================
           CABECERA
           ============================================ */
        .header-juego {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            background: linear-gradient(145deg, #2C8F8F, #1B4F6E);
            padding: 20px;
            border-radius: 50px;
            border: 4px solid white;
        }

        .personaje {
            width: 120px;
            height: 120px;
            background: #FFB347;
            border-radius: 60px 60px 30px 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 5px solid white;
            box-shadow: 0 8px 0 #C96F0F;
        }

        .personaje-ojos {
            display: flex;
            gap: 20px;
            margin-bottom: 10px;
        }

        .ojo {
            width: 25px;
            height: 25px;
            background: white;
            border-radius: 50%;
        }

        .boca {
            width: 40px;
            height: 15px;
            background: white;
            border-radius: 0 0 20px 20px;
        }

        .mensaje-personaje {
            flex: 1;
            background: white;
            padding: 20px 30px;
            border-radius: 40px;
            font-size: 2em;
            color: #1B4F6E;
            font-weight: bold;
            border: 4px solid #FFB347;
            box-shadow: 0 5px 0 #C96F0F;
            min-height: 100px;
            display: flex;
            align-items: center;
        }

        /* ============================================
           SELECTOR DE LETRAS
           ============================================ */
        .selector-letras {
            background: #E8F0F5;
            border-radius: 40px;
            padding: 20px;
            margin-bottom: 20px;
            border: 4px solid #1B4F6E;
        }

        .selector-titulo {
            font-size: 2em;
            color: #1B4F6E;
            margin-bottom: 15px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .letras-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .letra-boton {
            width: 85px;
            height: 85px;
            background: #2C8F8F;
            color: white;
            font-size: 3.2em;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 30px;
            border: 4px solid white;
            border-bottom: 8px solid #1B4F6E;
            cursor: pointer;
            transition: all 0.05s;
            opacity: 0.5;
            touch-action: manipulation;
        }

        .letra-boton.activa {
            opacity: 1;
            background: #FFB347;
            border-bottom-color: #C96F0F;
            transform: scale(1.05);
        }

        .letra-boton.desbloqueada {
            opacity: 0.8;
        }

        .letra-boton:active {
            transform: translateY(4px);
            border-bottom-width: 4px;
        }

        /* ============================================
           NIVELES
           ============================================ */
        .niveles-container {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            background: #E8F0F5;
            padding: 15px;
            border-radius: 50px;
            border: 4px solid #1B4F6E;
            flex-wrap: wrap;
            gap: 10px;
        }

        .nivel {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 12px 20px;
            border-radius: 40px;
            transition: all 0.05s;
            opacity: 0.6;
            min-width: 120px;
        }

        .nivel.activo {
            opacity: 1;
            background: #2C8F8F;
            border: 4px solid white;
            box-shadow: 0 5px 0 #1B4F6E;
        }

        .nivel-icono {
            font-size: 2.8em;
        }

        .nivel-texto {
            font-size: 1.5em;
            font-weight: bold;
            color: #1B4F6E;
        }

        .nivel.activo .nivel-texto {
            color: white;
        }

        /* ============================================
           RECOMPENSAS
           ============================================ */
        .recompensas {
            background: linear-gradient(145deg, #2C8F8F, #1B4F6E);
            padding: 15px;
            border-radius: 40px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 20px;
            border: 4px solid #FFB347;
            flex-wrap: wrap;
        }

        .monedas {
            background: #FFB347;
            padding: 12px 25px;
            border-radius: 40px;
            font-size: 2em;
            font-weight: bold;
            color: #1B4F6E;
            display: flex;
            align-items: center;
            gap: 10px;
            border: 4px solid white;
            min-width: 140px;
            justify-content: center;
        }

        .stickers {
            flex: 1;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .sticker {
            font-size: 2.5em;
            background: white;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 4px solid #FFB347;
            opacity: 0.3;
            transition: all 0.3s;
        }

        .sticker.desbloqueado {
            opacity: 1;
            border-color: #2C8F8F;
        }

        /* ============================================
           GRID DE JUEGOS
           ============================================ */
        .juegos-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .juego-tarjeta {
            background: white;
            border-radius: 30px;
            padding: 15px;
            border: 5px solid #2C8F8F;
            box-shadow: 0 8px 0 #1B4F6E;
        }

        .juego-titulo {
            background: #1B4F6E;
            color: white;
            padding: 12px 20px;
            border-radius: 40px;
            display: inline-block;
            font-size: 1.8em;
            margin-bottom: 15px;
            border: 4px solid #FFB347;
            font-weight: bold;
        }

        /* ============================================
           BOTONES DE ACCI√ìN
           ============================================ */
        .botones-accion {
            display: flex;
            gap: 8px;
            margin: 12px 0;
        }

        .boton-reinicio {
            background: #FF6B6B;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 35px;
            font-size: 1.6em;
            font-weight: bold;
            border-bottom: 6px solid #C44545;
            cursor: pointer;
            touch-action: manipulation;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            flex: 1;
        }

        .boton-reinicio:active {
            transform: translateY(4px);
            border-bottom-width: 2px;
        }

        .boton-reinicio-pequeno {
            background: #FFB347;
            color: #1B4F6E;
            border: none;
            padding: 8px 15px;
            border-radius: 30px;
            font-size: 1.3em;
            font-weight: bold;
            border-bottom: 4px solid #C96F0F;
            cursor: pointer;
            touch-action: manipulation;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-left: 8px;
        }

        .boton-reinicio-pequeno:active {
            transform: translateY(3px);
            border-bottom-width: 2px;
        }

        /* ============================================
           S√çLABAS
           ============================================ */
        .silabas-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .silaba-boton {
            background: #2C8F8F;
            color: white;
            font-size: 2.5em;
            font-weight: bold;
            padding: 18px 0;
            text-align: center;
            border-radius: 30px;
            border: 5px solid white;
            border-bottom: 8px solid #1B4F6E;
            cursor: pointer;
            touch-action: manipulation;
        }

        .silaba-boton:active {
            transform: translateY(4px);
            border-bottom-width: 4px;
        }

        .silaba-boton.desactivada {
            opacity: 0.3;
            pointer-events: none;
        }

        /* ============================================
           PALABRAS
           ============================================ */
        .palabras-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            max-height: 400px;
            overflow-y: auto;
            padding: 5px;
        }

        .palabra-juego {
            background: linear-gradient(145deg, #F5F9FF, #E8F0F5);
            border-radius: 25px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
            border: 4px solid #2C8F8F;
            cursor: pointer;
        }

        .palabra-juego:active {
            background: #FFEAA7;
        }

        .imagen-palabra {
            width: 70px;
            height: 70px;
            background: #FFB347;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.8em;
            border: 4px solid white;
        }

        .texto-palabra {
            font-size: 2em;
            font-weight: bold;
            color: #1B4F6E;
        }

        .texto-palabra-con-acento {
            font-size: 2em;
            font-weight: bold;
            color: #FFB347;
        }

        .silabas-mini {
            display: flex;
            gap: 4px;
            margin-top: 4px;
            flex-wrap: wrap;
        }

        .silaba-mini {
            background: #2C8F8F;
            color: white;
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 1.1em;
            border: 2px solid white;
        }

        .silaba-mini-acento {
            background: #FFB347;
            color: #1B4F6E;
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 1.1em;
            border: 2px solid white;
        }

        /* ============================================
           JUEGO DE FORMAR
           ============================================ */
        .juego-arrastrar {
            background: #E8F0F5;
            border-radius: 30px;
            padding: 15px;
        }

        .palabra-objetivo {
            font-size: 3.2em;
            text-align: center;
            color: #1B4F6E;
            margin-bottom: 15px;
            background: #FFB347;
            padding: 15px;
            border-radius: 45px;
            border: 5px solid white;
            font-weight: bold;
        }

        .silabas-arrastrables {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .silaba-arrastrable {
            background: #2C8F8F;
            color: white;
            font-size: 2.5em;
            font-weight: bold;
            padding: 18px;
            text-align: center;
            border-radius: 25px;
            border: 5px solid white;
            border-bottom: 8px solid #1B4F6E;
            cursor: pointer;
            touch-action: manipulation;
        }

        .silaba-arrastrable.acento {
            background: #FFB347;
            border-bottom-color: #C96F0F;
        }

        .zona-soltar {
            background: white;
            border: 6px dashed #2C8F8F;
            border-radius: 35px;
            padding: 25px;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 2.2em;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        /* ============================================
           ACENTOS
           ============================================ */
        .acentos-container {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin: 15px 0;
        }

        .boton-acento {
            background: #1B4F6E;
            color: white;
            font-size: 2.2em;
            font-weight: bold;
            padding: 12px 5px;
            text-align: center;
            border-radius: 30px;
            border: 4px solid white;
            border-bottom: 6px solid #0A2A3A;
            cursor: pointer;
            touch-action: manipulation;
        }

        .boton-acento:active {
            transform: translateY(3px);
            border-bottom-width: 3px;
        }

        /* ============================================
           BOTONES GRANDES
           ============================================ */
        .boton-grande {
            background: #2C8F8F;
            color: white;
            border: none;
            padding: 18px;
            border-radius: 40px;
            font-size: 2em;
            font-weight: bold;
            width: 100%;
            border-bottom: 8px solid #1B4F6E;
            cursor: pointer;
            touch-action: manipulation;
            margin: 8px 0;
        }

        .boton-grande:active {
            transform: translateY(4px);
            border-bottom-width: 4px;
        }

        .boton-grande.verificar {
            background: #FFB347;
            border-bottom-color: #C96F0F;
            color: #1B4F6E;
        }

        /* ============================================
           ESCRITURA
           ============================================ */
        .escritura-area {
            text-align: center;
        }

        .imagen-escritura {
            font-size: 6em;
            background: #FFB347;
            width: 160px;
            height: 160px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            border: 6px solid #2C8F8F;
            cursor: pointer;
        }

        .input-escritura {
            width: 100%;
            padding: 18px;
            font-size: 2.5em;
            text-align: center;
            border: 5px solid #2C8F8F;
            border-radius: 35px;
            margin-bottom: 15px;
            background: #F5F9FF;
            font-family: 'Arial', sans-serif !important;
        }

        .miniaturas-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin: 15px 0;
        }

        .miniatura {
            background: #E8F0F5;
            border-radius: 20px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            border: 4px solid #2C8F8F;
        }

        .miniatura:active {
            background: #FFB347;
        }

        .miniatura-imagen {
            font-size: 2.5em;
        }

        .miniatura-texto {
            font-size: 1.4em;
            font-weight: bold;
            color: #1B4F6E;
            margin-top: 4px;
        }

        /* ============================================
           MENSAJES
           ============================================ */
        .mensaje-juego {
            background: #FFB347;
            padding: 12px;
            border-radius: 30px;
            font-size: 1.6em;
            text-align: center;
            margin: 10px 0;
            font-weight: bold;
            border: 4px solid white;
            color: #1B4F6E;
        }

        .mensaje-exito {
            background: #2C8F8F;
            color: white;
            padding: 12px;
            border-radius: 30px;
            font-size: 1.6em;
            text-align: center;
            margin: 10px 0;
            font-weight: bold;
            border: 4px solid #FFB347;
        }

        .footer {
            text-align: center;
            margin-top: 20px;
            font-size: 1.6em;
            color: white;
            text-shadow: 2px 2px 0 #1B4F6E;
            font-weight: bold;
        }

        /* ============================================
           SCROLL
           ============================================ */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #E8F0F5;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #2C8F8F;
            border-radius: 10px;
            border: 2px solid white;
        }

        /* ============================================
           MEDIA QUERIES
           ============================================ */
        @media (max-width: 900px) {
            .juegos-grid {
                grid-template-columns: 1fr;
            }
            
            .header-juego {
                flex-direction: column;
                text-align: center;
            }
            
            .mensaje-personaje {
                font-size: 1.5em;
            }
            
            .letra-boton {
                width: 70px;
                height: 70px;
                font-size: 2.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- PERSONAJE -->
        <div class="header-juego">
            <div class="personaje">
                <div class="personaje-ojos">
                    <div class="ojo"></div>
                    <div class="ojo"></div>
                </div>
                <div class="boca"></div>
                <div style="color: white; font-size: 1.5em; margin-top: 8px;">ABC</div>
            </div>
            <div class="mensaje-personaje" id="mensajePersonaje">
                ¬°Hola! Elige una letra
            </div>
        </div>

        <!-- SELECTOR DE LETRAS -->
        <div class="selector-letras">
            <div class="selector-titulo">
                <span>üî§</span> Letras
            </div>
            <div class="letras-grid" id="selectorLetras">
                <div class="letra-boton activa" data-letra="M" ontouchstart="seleccionarLetra('M')" onclick="seleccionarLetra('M')">M</div>
                <div class="letra-boton" data-letra="P" ontouchstart="seleccionarLetra('P')" onclick="seleccionarLetra('P')">P</div>
                <div class="letra-boton" data-letra="L" ontouchstart="seleccionarLetra('L')" onclick="seleccionarLetra('L')">L</div>
                <div class="letra-boton" data-letra="S" ontouchstart="seleccionarLetra('S')" onclick="seleccionarLetra('S')">S</div>
                <div class="letra-boton" data-letra="T" ontouchstart="seleccionarLetra('T')" onclick="seleccionarLetra('T')">T</div>
                <div class="letra-boton" data-letra="N" ontouchstart="seleccionarLetra('N')" onclick="seleccionarLetra('N')">N</div>
                <div class="letra-boton" data-letra="D" ontouchstart="seleccionarLetra('D')" onclick="seleccionarLetra('D')">D</div>
                <div class="letra-boton" data-letra="C" ontouchstart="seleccionarLetra('C')" onclick="seleccionarLetra('C')">C</div>
                <div class="letra-boton" data-letra="R" ontouchstart="seleccionarLetra('R')" onclick="seleccionarLetra('R')">R</div>
                <div class="letra-boton" data-letra="B" ontouchstart="seleccionarLetra('B')" onclick="seleccionarLetra('B')">B</div>
            </div>
        </div>

        <!-- NIVELES -->
        <div class="niveles-container">
            <div class="nivel activo" data-nivel="1" ontouchstart="cambiarNivel(1)" onclick="cambiarNivel(1)">
                <span class="nivel-icono">ü•ö</span>
                <span class="nivel-texto">Nivel 1</span>
            </div>
            <div class="nivel" data-nivel="2" ontouchstart="cambiarNivel(2)" onclick="cambiarNivel(2)">
                <span class="nivel-icono">üê£</span>
                <span class="nivel-texto">Nivel 2</span>
            </div>
            <div class="nivel" data-nivel="3" ontouchstart="cambiarNivel(3)" onclick="cambiarNivel(3)">
                <span class="nivel-icono">ü¶ú</span>
                <span class="nivel-texto">Nivel 3</span>
            </div>
        </div>

        <!-- RECOMPENSAS -->
        <div class="recompensas">
            <div class="monedas">
                <span>ü™ô</span>
                <span id="contadorMonedas">5</span>
            </div>
            <div class="stickers" id="stickersContainer">
                <span class="sticker" data-sticker="1">üêí</span>
                <span class="sticker" data-sticker="2">üöÄ</span>
                <span class="sticker" data-sticker="3">‚öΩ</span>
                <span class="sticker" data-sticker="4">ü¶Å</span>
                <span class="sticker" data-sticker="5">üêâ</span>
            </div>
        </div>

        <!-- JUEGOS -->
        <div class="juegos-grid">
            <!-- JUEGO 1: S√çLABAS -->
            <div class="juego-tarjeta">
                <div class="juego-titulo">
                    üîä S√≠labas
                    <span class="boton-reinicio-pequeno" ontouchstart="reiniciarSilabas()" onclick="reiniciarSilabas()">üîÑ</span>
                </div>
                <div class="silabas-grid" id="silabasGrid"></div>
                <div class="mensaje-juego" id="mensajeSilabas">Toca una s√≠laba</div>
            </div>

            <!-- JUEGO 2: PALABRAS -->
            <div class="juego-tarjeta">
                <div class="juego-titulo">
                    üìñ Palabras
                    <span class="boton-reinicio-pequeno" ontouchstart="reiniciarPalabras()" onclick="reiniciarPalabras()">üîÑ</span>
                </div>
                <div class="palabras-grid" id="palabrasJuego"></div>
            </div>

            <!-- JUEGO 3: FORMAR -->
            <div class="juego-tarjeta">
                <div class="juego-titulo">
                    üß© Formar
                    <span class="boton-reinicio-pequeno" ontouchstart="reiniciarJuegoFormar()" onclick="reiniciarJuegoFormar()">üîÑ</span>
                </div>
                <div class="juego-arrastrar">
                    <div class="palabra-objetivo" id="palabraObjetivo">Mama</div>
                    
                    <div class="silabas-arrastrables" id="silabasArrastrables"></div>
                    
                    <div class="zona-soltar" id="zonaSoltar" ontouchstart="agregarSilabaTactil(event)" onclick="agregarSilabaTactil(event)">
                        üëÜ Toca las s√≠labas
                    </div>
                    
                    <div class="acentos-container">
                        <div class="boton-acento" ontouchstart="agregarAcento('√Å')" onclick="agregarAcento('√Å')">√Å</div>
                        <div class="boton-acento" ontouchstart="agregarAcento('√â')" onclick="agregarAcento('√â')">√â</div>
                        <div class="boton-acento" ontouchstart="agregarAcento('√ç')" onclick="agregarAcento('√ç')">√ç</div>
                        <div class="boton-acento" ontouchstart="agregarAcento('√ì')" onclick="agregarAcento('√ì')">√ì</div>
                        <div class="boton-acento" ontouchstart="agregarAcento('√ö')" onclick="agregarAcento('√ö')">√ö</div>
                    </div>
                    
                    <div class="botones-accion">
                        <button class="boton-reinicio" ontouchstart="limpiarZonaFormar()" onclick="limpiarZonaFormar()">üßπ Limpiar</button>
                        <button class="boton-reinicio" ontouchstart="reiniciarJuegoFormar()" onclick="reiniciarJuegoFormar()">üîÑ Nueva</button>
                    </div>
                    
                    <button class="boton-grande verificar" ontouchstart="verificarPalabraFormada()" onclick="verificarPalabraFormada()">‚úÖ Verificar</button>
                    
                    <div id="resultadoFormar" class="mensaje-juego"></div>
                </div>
            </div>

            <!-- JUEGO 4: ESCRIBIR -->
            <div class="juego-tarjeta">
                <div class="juego-titulo">
                    ‚úèÔ∏è Escribir
                    <span class="boton-reinicio-pequeno" ontouchstart="reiniciarEscritura()" onclick="reiniciarEscritura()">üîÑ</span>
                </div>
                <div class="escritura-area">
                    <div class="imagen-escritura" id="imagenEscritura" ontouchstart="cambiarPalabraEscrituraAleatoria()" onclick="cambiarPalabraEscrituraAleatoria()">üë©</div>
                    
                    <input type="text" class="input-escritura" id="inputEscritura" 
                           placeholder="Escribe" maxlength="6" inputmode="text" autocomplete="off">
                    
                    <div class="acentos-container">
                        <div class="boton-acento" ontouchstart="agregarAcentoEscritura('√Å')" onclick="agregarAcentoEscritura('√Å')">√Å</div>
                        <div class="boton-acento" ontouchstart="agregarAcentoEscritura('√â')" onclick="agregarAcentoEscritura('√â')">√â</div>
                        <div class="boton-acento" ontouchstart="agregarAcentoEscritura('√ç')" onclick="agregarAcentoEscritura('√ç')">√ç</div>
                        <div class="boton-acento" ontouchstart="agregarAcentoEscritura('√ì')" onclick="agregarAcentoEscritura('√ì')">√ì</div>
                        <div class="boton-acento" ontouchstart="agregarAcentoEscritura('√ö')" onclick="agregarAcentoEscritura('√ö')">√ö</div>
                    </div>
                    
                    <div class="miniaturas-grid" id="miniaturasEscritura"></div>
                    
                    <div class="botones-accion">
                        <button class="boton-reinicio" ontouchstart="limpiarInputEscritura()" onclick="limpiarInputEscritura()">üßπ Limpiar</button>
                        <button class="boton-reinicio" ontouchstart="reiniciarEscritura()" onclick="reiniciarEscritura()">üîÑ Nueva</button>
                    </div>
                    
                    <button class="boton-grande" ontouchstart="verificarEscritura()" onclick="verificarEscritura()">üîç Revisar</button>
                    
                    <div id="resultadoEscritura" class="mensaje-juego"></div>
                </div>
            </div>
        </div>

        <div class="footer">‚≠ê M - P - L - S - T - N - D - C - R - B ‚≠ê</div>
    </div>

    <script>
        // ============================================
        // DATOS DE PALABRAS (COMPLETO)
        // ============================================
        const palabrasPorLetra = {
            'M': {
                1: [
                    { palabra: 'Mama', imagen: 'üë©', silabas: ['Ma', 'ma'], tieneAcento: false },
                    { palabra: 'Memo', imagen: 'üìù', silabas: ['Me', 'mo'], tieneAcento: false },
                    { palabra: 'Mimi', imagen: 'üê±', silabas: ['Mi', 'mi'], tieneAcento: false },
                    { palabra: 'Momo', imagen: 'üçë', silabas: ['Mo', 'mo'], tieneAcento: false },
                    { palabra: 'Mumu', imagen: 'üêÑ', silabas: ['Mu', 'mu'], tieneAcento: false }
                ],
                2: [
                    { palabra: 'Mam√°', imagen: 'üë©‚Äçüëß', silabas: ['Ma', 'm√°'], tieneAcento: true, acentoEn: 1 },
                    { palabra: 'Mem√°', imagen: 'üíù', silabas: ['Me', 'm√°'], tieneAcento: true, acentoEn: 1 },
                    { palabra: 'Mim√°', imagen: 'üíï', silabas: ['Mi', 'm√°'], tieneAcento: true, acentoEn: 1 }
                ],
                3: [
                    { palabra: 'Mapa', imagen: 'üó∫Ô∏è', silabas: ['Ma', 'pa'], tieneAcento: false },
                    { palabra: 'Puma', imagen: 'üêÜ', silabas: ['Pu', 'ma'], tieneAcento: false },
                    { palabra: 'Loma', imagen: '‚õ∞Ô∏è', silabas: ['Lo', 'ma'], tieneAcento: false }
                ]
            },
            'P': {
                1: [
                    { palabra: 'Papa', imagen: 'ü•î', silabas: ['Pa', 'pa'], tieneAcento: false },
                    { palabra: 'Pepe', imagen: 'üë®', silabas: ['Pe', 'pe'], tieneAcento: false },
                    { palabra: 'Pipa', imagen: 'üö¨', silabas: ['Pi', 'pa'], tieneAcento: false }
                ],
                2: [
                    { palabra: 'Pap√°', imagen: 'üë®‚Äçüëß', silabas: ['Pa', 'p√°'], tieneAcento: true, acentoEn: 1 }
                ],
                3: [
                    { palabra: 'Mapa', imagen: 'üó∫Ô∏è', silabas: ['Ma', 'pa'], tieneAcento: false },
                    { palabra: 'Puma', imagen: 'üêÜ', silabas: ['Pu', 'ma'], tieneAcento: false },
                    { palabra: 'Pala', imagen: 'üõ†Ô∏è', silabas: ['Pa', 'la'], tieneAcento: false }
                ]
            },
            'L': {
                1: [
                    { palabra: 'Lala', imagen: 'üéµ', silabas: ['La', 'la'], tieneAcento: false },
                    { palabra: 'Lelo', imagen: 'üòµ', silabas: ['Le', 'lo'], tieneAcento: false },
                    { palabra: 'Lili', imagen: 'üå∏', silabas: ['Li', 'li'], tieneAcento: false }
                ],
                2: [
                    { palabra: 'Lul√∫', imagen: 'üê©', silabas: ['Lu', 'l√∫'], tieneAcento: true, acentoEn: 1 }
                ],
                3: [
                    { palabra: 'Loma', imagen: '‚õ∞Ô∏è', silabas: ['Lo', 'ma'], tieneAcento: false },
                    { palabra: 'Pala', imagen: 'üõ†Ô∏è', silabas: ['Pa', 'la'], tieneAcento: false },
                    { palabra: 'Sala', imagen: 'üè†', silabas: ['Sa', 'la'], tieneAcento: false }
                ]
            },
            'S': {
                1: [
                    { palabra: 'Sasa', imagen: 'üëß', silabas: ['Sa', 'sa'], tieneAcento: false },
                    { palabra: 'Sese', imagen: 'üó£Ô∏è', silabas: ['Se', 'se'], tieneAcento: false },
                    { palabra: 'Sisi', imagen: '‚úÖ', silabas: ['Si', 'si'], tieneAcento: false }
                ],
                2: [
                    { palabra: 'Sus√∫', imagen: 'ü§´', silabas: ['Su', 's√∫'], tieneAcento: true, acentoEn: 1 }
                ],
                3: [
                    { palabra: 'Sima', imagen: 'üèûÔ∏è', silabas: ['Si', 'ma'], tieneAcento: false },
                    { palabra: 'Paso', imagen: 'üë£', silabas: ['Pa', 'so'], tieneAcento: false },
                    { palabra: 'Sopa', imagen: 'üç≤', silabas: ['So', 'pa'], tieneAcento: false }
                ]
            },
            'T': {
                1: [
                    { palabra: 'Tata', imagen: 'üë¥', silabas: ['Ta', 'ta'], tieneAcento: false },
                    { palabra: 'Tete', imagen: 'üë∂', silabas: ['Te', 'te'], tieneAcento: false },
                    { palabra: 'Tito', imagen: 'üêï', silabas: ['Ti', 'to'], tieneAcento: false }
                ],
                2: [
                    { palabra: 'Tat√°', imagen: 'üëµ', silabas: ['Ta', 't√°'], tieneAcento: true, acentoEn: 1 }
                ],
                3: [
                    { palabra: 'Toma', imagen: 'üì∏', silabas: ['To', 'ma'], tieneAcento: false },
                    { palabra: 'Pato', imagen: 'ü¶Ü', silabas: ['Pa', 'to'], tieneAcento: false },
                    { palabra: 'Tapa', imagen: 'üìï', silabas: ['Ta', 'pa'], tieneAcento: false }
                ]
            },
            'N': {
                1: [
                    { palabra: 'Nana', imagen: 'üëµ', silabas: ['Na', 'na'], tieneAcento: false },
                    { palabra: 'Nene', imagen: 'üë∂', silabas: ['Ne', 'ne'], tieneAcento: false },
                    { palabra: 'Nini', imagen: 'ü§∑', silabas: ['Ni', 'ni'], tieneAcento: false }
                ],
                2: [
                    { palabra: 'Nan√°', imagen: 'üçº', silabas: ['Na', 'n√°'], tieneAcento: true, acentoEn: 1 }
                ],
                3: [
                    { palabra: 'Nada', imagen: 'üåä', silabas: ['Na', 'da'], tieneAcento: false },
                    { palabra: 'Luna', imagen: 'üåô', silabas: ['Lu', 'na'], tieneAcento: false },
                    { palabra: 'Pana', imagen: 'üß£', silabas: ['Pa', 'na'], tieneAcento: false }
                ]
            },
            'D': {
                1: [
                    { palabra: 'Dada', imagen: 'üé®', silabas: ['Da', 'da'], tieneAcento: false },
                    { palabra: 'Dedo', imagen: 'üëÜ', silabas: ['De', 'do'], tieneAcento: false },
                    { palabra: 'Didi', imagen: 'üéµ', silabas: ['Di', 'di'], tieneAcento: false }
                ],
                2: [
                    { palabra: 'Dad√°', imagen: 'üé≠', silabas: ['Da', 'd√°'], tieneAcento: true, acentoEn: 1 }
                ],
                3: [
                    { palabra: 'Nada', imagen: 'üåä', silabas: ['Na', 'da'], tieneAcento: false },
                    { palabra: 'Dama', imagen: 'üë∏', silabas: ['Da', 'ma'], tieneAcento: false },
                    { palabra: 'D√≠a', imagen: '‚òÄÔ∏è', silabas: ['D√≠', 'a'], tieneAcento: true, acentoEn: 0 }
                ]
            },
            'C': {
                1: [
                    { palabra: 'Caca', imagen: 'üí©', silabas: ['Ca', 'ca'], tieneAcento: false },
                    { palabra: 'Coco', imagen: 'ü••', silabas: ['Co', 'co'], tieneAcento: false },
                    { palabra: 'Cucu', imagen: 'üïäÔ∏è', silabas: ['Cu', 'cu'], tieneAcento: false }
                ],
                2: [
                    { palabra: 'Cac√°', imagen: '‚ö†Ô∏è', silabas: ['Ca', 'c√°'], tieneAcento: true, acentoEn: 1 }
                ],
                3: [
                    { palabra: 'Cama', imagen: 'üõèÔ∏è', silabas: ['Ca', 'ma'], tieneAcento: false },
                    { palabra: 'Copa', imagen: 'üèÜ', silabas: ['Co', 'pa'], tieneAcento: false },
                    { palabra: 'Cuna', imagen: 'üë∂', silabas: ['Cu', 'na'], tieneAcento: false }
                ]
            },
            'R': {
                1: [
                    { palabra: 'Rara', imagen: 'ü§™', silabas: ['Ra', 'ra'], tieneAcento: false },
                    { palabra: 'Roro', imagen: 'üöÅ', silabas: ['Ro', 'ro'], tieneAcento: false },
                    { palabra: 'Ruru', imagen: 'üêõ', silabas: ['Ru', 'ru'], tieneAcento: false }
                ],
                2: [
                    { palabra: 'Rar√°', imagen: 'ü¶ú', silabas: ['Ra', 'r√°'], tieneAcento: true, acentoEn: 1 }
                ],
                3: [
                    { palabra: 'Rama', imagen: 'üåø', silabas: ['Ra', 'ma'], tieneAcento: false },
                    { palabra: 'Pera', imagen: 'üçê', silabas: ['Pe', 'ra'], tieneAcento: false },
                    { palabra: 'Rosa', imagen: 'üåπ', silabas: ['Ro', 'sa'], tieneAcento: false }
                ]
            },
            'B': {
                1: [
                    { palabra: 'Baba', imagen: 'üíß', silabas: ['Ba', 'ba'], tieneAcento: false },
                    { palabra: 'Bebe', imagen: 'üçº', silabas: ['Be', 'be'], tieneAcento: false },
                    { palabra: 'Bibi', imagen: 'üìñ', silabas: ['Bi', 'bi'], tieneAcento: false }
                ],
                2: [
                    { palabra: 'Bab√°', imagen: 'üç∞', silabas: ['Ba', 'b√°'], tieneAcento: true, acentoEn: 1 },
                    { palabra: 'Beb√©', imagen: 'üë∂', silabas: ['Be', 'b√©'], tieneAcento: true, acentoEn: 1 }
                ],
                3: [
                    { palabra: 'Bala', imagen: 'üî´', silabas: ['Ba', 'la'], tieneAcento: false },
                    { palabra: 'Bota', imagen: 'üë¢', silabas: ['Bo', 'ta'], tieneAcento: false },
                    { palabra: 'Boca', imagen: 'üëÑ', silabas: ['Bo', 'ca'], tieneAcento: false }
                ]
            }
        };

        // ============================================
        // VARIABLES GLOBALES
        // ============================================
        let letraActual = 'M';
        let nivelActual = 1;
        let letrasDesbloqueadas = ['M'];
        let monedas = 5;
        let stickersDesbloqueados = [false, false, false, false, false];
        let silabasSeleccionadas = [];
        let palabraActualEscribir = 'Mama';
        let speechUtterance = null;

        // ============================================
        // VOZ MEJORADA PARA WEB
        // ============================================
        function hablar(texto) {
            try {
                if (window.speechSynthesis) {
                    window.speechSynthesis.cancel();
                    
                    const utterance = new SpeechSynthesisUtterance(texto);
                    utterance.lang = 'es-ES';
                    utterance.rate = 0.5;
                    utterance.pitch = 1.2;
                    utterance.volume = 1;
                    
                    window.speechSynthesis.speak(utterance);
                }
            } catch(e) {
                console.log('Error de voz:', e);
            }
        }

        // ============================================
        // FUNCIONES PRINCIPALES
        // ============================================
        function seleccionarLetra(letra) {
            if (!letrasDesbloqueadas.includes(letra)) {
                if (monedas >= 5) {
                    monedas -= 5;
                    document.getElementById('contadorMonedas').innerHTML = monedas;
                    letrasDesbloqueadas.push(letra);
                } else {
                    document.getElementById('mensajePersonaje').innerHTML = `Necesitas 5 monedas para ${letra}`;
                    return;
                }
            }
            
            letraActual = letra;
            actualizarSelectorLetras();
            cargarTodo();
        }

        function actualizarSelectorLetras() {
            document.querySelectorAll('.letra-boton').forEach(btn => {
                let letra = btn.getAttribute('data-letra');
                btn.classList.remove('activa', 'desbloqueada');
                if (letra === letraActual) btn.classList.add('activa');
                if (letrasDesbloqueadas.includes(letra)) btn.classList.add('desbloqueada');
            });
        }

        function cambiarNivel(nivel) {
            nivelActual = nivel;
            document.querySelectorAll('.nivel').forEach(n => n.classList.remove('activo'));
            document.querySelector(`[data-nivel="${nivel}"]`).classList.add('activo');
            cargarTodo();
        }

        function cargarTodo() {
            cargarSilabas();
            cargarPalabras();
            cargarMiniaturasEscritura();
            reiniciarJuegoFormar();
        }

        function cargarSilabas() {
            let html = '';
            ['ma','me','mi','mo','mu'].forEach(s => {
                html += `<div class="silaba-boton" ontouchstart="aprenderSilaba('${s}')" onclick="aprenderSilaba('${s}')">${s}</div>`;
            });
            document.getElementById('silabasGrid').innerHTML = html;
        }

        function cargarPalabras() {
            let palabras = palabrasPorLetra[letraActual]?.[nivelActual] || [];
            let html = '';
            palabras.forEach(p => {
                html += `
                    <div class="palabra-juego" ontouchstart="seleccionarPalabra('${p.palabra}')" onclick="seleccionarPalabra('${p.palabra}')">
                        <div class="imagen-palabra">${p.imagen}</div>
                        <div>
                            <div class="${p.tieneAcento ? 'texto-palabra-con-acento' : 'texto-palabra'}">${p.palabra}</div>
                        </div>
                    </div>
                `;
            });
            document.getElementById('palabrasJuego').innerHTML = html;
        }

        function cargarMiniaturasEscritura() {
            let palabras = palabrasPorLetra[letraActual]?.[nivelActual] || [];
            let html = '';
            palabras.forEach(p => {
                html += `
                    <div class="miniatura" ontouchstart="cambiarPalabraEscritura('${p.palabra}', '${p.imagen}')" onclick="cambiarPalabraEscritura('${p.palabra}', '${p.imagen}')">
                        <div class="miniatura-imagen">${p.imagen}</div>
                        <div class="miniatura-texto">${p.palabra}</div>
                    </div>
                `;
            });
            document.getElementById('miniaturasEscritura').innerHTML = html;
        }

        function aprenderSilaba(silaba) {
            hablar(silaba);
            document.getElementById('mensajeSilabas').innerHTML = `üîä ${silaba}`;
        }

        function seleccionarPalabra(palabra) {
            hablar(palabra);
            document.getElementById('mensajePersonaje').innerHTML = palabra;
        }

        function reiniciarSilabas() {
            cargarSilabas();
            document.getElementById('mensajeSilabas').innerHTML = 'Toca una s√≠laba';
        }

        function reiniciarPalabras() {
            cargarPalabras();
        }

        function reiniciarJuegoFormar() {
            let palabras = palabrasPorLetra[letraActual]?.[nivelActual] || [];
            if (palabras.length === 0) return;
            
            let palabra = palabras[Math.floor(Math.random() * palabras.length)];
            document.getElementById('palabraObjetivo').innerHTML = palabra.palabra;
            
            let silabas = [...palabra.silabas];
            while (silabas.length < 4) {
                silabas.push(['ma','me','mi','mo','mu'][Math.floor(Math.random() * 5)]);
            }
            silabas.sort(() => Math.random() - 0.5);
            
            let html = '';
            silabas.forEach(s => {
                html += `<div class="silaba-arrastrable" ontouchstart="seleccionarSilabaTactil('${s}')" onclick="seleccionarSilabaTactil('${s}')">${s}</div>`;
            });
            document.getElementById('silabasArrastrables').innerHTML = html;
            
            document.getElementById('zonaSoltar').innerHTML = 'üëÜ Toca las s√≠labas';
            silabasSeleccionadas = [];
            document.getElementById('resultadoFormar').innerHTML = '';
        }

        function seleccionarSilabaTactil(silaba) {
            let palabraObjetivo = document.getElementById('palabraObjetivo').innerHTML;
            let palabras = palabrasPorLetra[letraActual]?.[nivelActual] || [];
            let palabraData = palabras.find(p => p.palabra === palabraObjetivo);
            let numSilabas = palabraData ? palabraData.silabas.length : 2;
            
            if (silabasSeleccionadas.length < numSilabas) {
                silabasSeleccionadas.push(silaba);
                let zona = document.getElementById('zonaSoltar');
                if (zona.innerHTML === 'üëÜ Toca las s√≠labas') zona.innerHTML = '';
                zona.innerHTML += `<span style="background:#2C8F8F; color:white; padding:8px 15px; border-radius:20px; font-size:1.4em;">${silaba}</span>`;
            }
        }

        function agregarAcento(vocal) {
            if (silabasSeleccionadas.length > 0) {
                let ultima = silabasSeleccionadas[silabasSeleccionadas.length - 1];
                let vocales = ['a','e','i','o','u','A','E','I','O','U'];
                for (let i = ultima.length - 1; i >= 0; i--) {
                    if (vocales.includes(ultima[i])) {
                        ultima = ultima.substring(0, i) + vocal + ultima.substring(i + 1);
                        silabasSeleccionadas[silabasSeleccionadas.length - 1] = ultima;
                        break;
                    }
                }
                actualizarZonaSoltar();
            }
        }

        function actualizarZonaSoltar() {
            let zona = document.getElementById('zonaSoltar');
            zona.innerHTML = '';
            silabasSeleccionadas.forEach(s => {
                zona.innerHTML += `<span style="background:#2C8F8F; color:white; padding:8px 15px; border-radius:20px; font-size:1.4em;">${s}</span>`;
            });
        }

        function limpiarZonaFormar() {
            document.getElementById('zonaSoltar').innerHTML = 'üëÜ Toca las s√≠labas';
            silabasSeleccionadas = [];
            document.getElementById('resultadoFormar').innerHTML = '';
        }

        function verificarPalabraFormada() {
            let palabraObjetivo = document.getElementById('palabraObjetivo').innerHTML;
            let palabraFormada = silabasSeleccionadas.join('');
            
            if (palabraFormada === palabraObjetivo) {
                document.getElementById('resultadoFormar').innerHTML = 'üéâ ¬°Bien! +2 monedas';
                hablar('¬°Muy bien!');
                monedas += 2;
                document.getElementById('contadorMonedas').innerHTML = monedas;
                setTimeout(reiniciarJuegoFormar, 1500);
            } else {
                document.getElementById('resultadoFormar').innerHTML = 'ü§î Intenta otra vez';
            }
        }

        function cambiarPalabraEscritura(palabra, imagen) {
            palabraActualEscribir = palabra;
            document.getElementById('imagenEscritura').innerHTML = imagen;
            document.getElementById('inputEscritura').value = '';
            document.getElementById('resultadoEscritura').innerHTML = '';
            hablar(palabra);
        }

        function cambiarPalabraEscrituraAleatoria() {
            let palabras = palabrasPorLetra[letraActual]?.[nivelActual] || [];
            if (palabras.length > 0) {
                let p = palabras[Math.floor(Math.random() * palabras.length)];
                cambiarPalabraEscritura(p.palabra, p.imagen);
            }
        }

        function agregarAcentoEscritura(vocal) {
            let input = document.getElementById('inputEscritura');
            let pos = input.selectionStart;
            input.value = input.value.substring(0, pos) + vocal + input.value.substring(pos);
            input.setSelectionRange(pos + 1, pos + 1);
            input.focus();
        }

        function limpiarInputEscritura() {
            document.getElementById('inputEscritura').value = '';
            document.getElementById('resultadoEscritura').innerHTML = '';
        }

        function reiniciarEscritura() {
            cambiarPalabraEscrituraAleatoria();
            limpiarInputEscritura();
        }

        function normalizarTexto(t) {
            return t.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();
        }

        function verificarEscritura() {
            let escrito = document.getElementById('inputEscritura').value.trim();
            
            if (escrito === palabraActualEscribir) {
                document.getElementById('resultadoEscritura').innerHTML = '‚≠ê ¬°Perfecto! +3 monedas';
                hablar('¬°Excelente!');
                monedas += 3;
                document.getElementById('contadorMonedas').innerHTML = monedas;
            } else if (normalizarTexto(escrito) === normalizarTexto(palabraActualEscribir)) {
                document.getElementById('resultadoEscritura').innerHTML = 'üëç Falta la tilde';
                hablar('Revisa la tilde');
            } else {
                document.getElementById('resultadoEscritura').innerHTML = '‚úèÔ∏è Sigue practicando';
            }
        }

        // ============================================
        // INICIALIZAR
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            cargarTodo();
            document.getElementById('contadorMonedas').innerHTML = monedas;
            
            // Precargar voces
            if (window.speechSynthesis) {
                window.speechSynthesis.getVoices();
            }
        });
    </script>
</body>
</html>